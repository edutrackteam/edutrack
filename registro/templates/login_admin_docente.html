{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Inicio de Sesi√≥n</title>
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f1f1f1;
      margin: 0;
      padding: 0;
    }

    .login-container {
      display: flex;
      height: 100vh;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .login-box {
      display: flex;
      width: 750px; 
      background-color: white;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }

    .left-panel {
      width: 50%;
      background-color: #4d6c7a;
    }

    .right-panel {
      width: 55%;
      padding: 40px; 
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .icon-logo {
      width: 40px; /* M√°s peque√±o */
      margin-bottom: 10px;
    }

    h2 {
      margin: 0;
      font-size: 20px;
      color: #37474f;
    }

    p {
      margin-bottom: 20px;
      font-size: 14px;
      color: #666;
    }

    input {
      width: 100%;
      padding: 10px;
      font-size: 14px;
      border: 1px solid #e0aa5c;
      border-radius: 8px;
      margin-bottom: 15px;
    }

    .btn {
      width: 100%;
      padding: 10px;
      font-size: 14px;
      border-radius: 8px;
      border: none;
      color: white;
      font-weight: bold;
      cursor: pointer;
      margin-bottom: 8px;
    }

    .btn-login {
      background-color: #3f5d6b;
    }

    .btn-register {
      background-color: #7da2b7;
    }

    .forgot {
      font-size: 12px;
      margin-top: 8px;
      text-align: center;
    }

    .forgot a {
      color: #3f5d6b;
      text-decoration: none;
    }

    .messages {
      margin-top: 10px;
      font-size: 13px;
    }

    .error, .success {
      padding: 8px;
      border-radius: 6px;
    }

    .error {
      background-color: #f8d7da;
      color: #721c24;
    }

    .success {
      background-color: #d4edda;
      color: #155724;
    }

    /* Estilo para selecci√≥n de rol */
    .rol-selector {
      display: flex;
      gap: 8px;
      justify-content: center;
      margin-bottom: 20px;
    }

    .btn-rol {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 6px 12px;
      border: 2px solid #ccc;
      border-radius: 10px;
      background-color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 13px;
      width: 90px;
    }

    .btn-rol span.icon {
      font-size: 22px;
      margin-bottom: 3px;
    }

    .btn-rol.selected {
      border-color: #e0aa5c;
      color: #e0aa5c;
      position: relative;
    }

    .btn-rol.selected::after {
      content: '‚úî';
      position: absolute;
      top: 3px;
      right: 8px;
      font-size: 12px;
      background-color: white;
      border-radius: 50%;
      color: #e0aa5c;
    }

    .g-recaptcha {
      margin: 5px 0 15px;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
  .login-box {
    flex-direction: column;
    width: 90%;
    height: auto;
  }

  .left-panel {
    width: 100%;
    height: 150px;
    border-radius: 20px 20px 0 0;
  }

  .right-panel {
    width: 100%;
    padding: 25px;
  }

  .rol-selector {
    flex-wrap: wrap;
    gap: 10px;
  }

  .btn-rol {
    width: 45%;
  }

  h2 {
    font-size: 18px;
    text-align: center;
  }

  p {
    text-align: center;
  }

  .icon-logo {
    display: block;
    margin: 0 auto 10px;
  }
}


  </style>
</head>
<body>
  <div class="login-container">
    <div class="login-box">
      <div class="left-panel"></div>
      <div class="right-panel">
        <img src="{% static 'registro/logo.png' %}" class="icon-logo" alt="Logo">
        <h2>Inicio de sesi√≥n</h2>
        <p>Bienvenidos al Sistema Web de Seguimiento Acad√©mico</p>

        
        <form method="post">
          {% csrf_token %}

          <!-- Botones para seleccionar rol -->
          <div class="rol-selector">
            {% for rol_item in roles %}
              <div class="btn-rol {% if request.POST.rol == rol_item.id|stringformat:"s" %}selected{% elif not request.POST.rol and forloop.first %}selected{% endif %}"
                  id="btn-rol-{{ rol_item.id }}" 
                  onclick="seleccionarRol('{{ rol_item.id }}')">
                <span class="icon">
                  {% if rol_item.nombre == "Profesor" %}üë§{% elif rol_item.nombre == "Directivo" %}üßë‚Äçüíº{% endif %}
                </span>
                {{ rol_item.nombre }}
              </div>
            {% endfor %}
          </div>

          <!-- Campos -->
          <label for="correo">Correo electr√≥nico</label>
          {{ form.correo }}

          <label for="contrase√±a">Contrase√±a</label>
          {{ form.contrase√±a }}

          <input type="hidden" name="rol" id="id_rol" value="{{ request.POST.rol|default:roles.0.id }}">

          <div class="g-recaptcha" data-sitekey="6LeYgI4rAAAAALtBvgAFAzpij6oMmzYjgrRYP1pU"></div>

          <!-- Botones -->
          <button type="submit" class="btn btn-login">Iniciar Sesi√≥n</button>
          <a href="{% url 'registro_admin' %}">
            <button type="button" class="btn btn-register">Registrarse</button>
          </a>

        </form>
        <div class="messages">
          {% for message in messages %}
            <div class="{% if message.tags == 'error' %}error{% elif message.tags == 'success' %}success{% endif %}">
              {{ message }}
            </div>
          {% endfor %}
        </div>

        <div class="forgot">
          ¬øOlvidaste tu contrase√±a?<br>
          <a href="#">Restablecer contrase√±a</a>
        </div>

      </div>
    </div>
  </div>

  <script>
    function seleccionarRol(rolId) {
      document.getElementById('id_rol').value = rolId;

      // Quitar selecci√≥n de todos los botones
      const botones = document.querySelectorAll('.btn-rol');
      botones.forEach(btn => btn.classList.remove('selected'));

      // Activar el que se seleccion√≥
      const botonSeleccionado = document.getElementById('btn-rol-' + rolId);
      if (botonSeleccionado) {
        botonSeleccionado.classList.add('selected');
      }
    }
  </script>
</body>
</html>
